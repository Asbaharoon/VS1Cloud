<template name="custfieldpopup">
    <div id="custfieldpopup{{#if custid}}_{{custid}}{{/if}}">
        <div class="modal fade" role="dialog" tabindex="-1" id="myModal4{{#if custid}}_{{custid}}{{/if}}">
          <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h4>Custom Fields</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">×</span></button>
              </div>
              <style>
                button.dropdown-toggle:empty::after {
                  display: inline-block;
                  margin-left: 0;
                  vertical-align: 0.255em;
                  content: "";
                  border-top: 0.3em solid;
                  border-right: 0.3em solid transparent;
                  border-bottom: 0;
                  border-left: 0.3em solid transparent;
                  box-sizing: border-box;
                }
              </style>
              <div class="modal-body">
                <div>
                  <div class="row">
                    <div class="col-12">
                        {{#each customfields}}
                            {{#let index = @index}}
                                <span class="custFieldText{{index}}" style="margin-left: 42px; font-size: 14px;">{{this.displayType}} Field</span>
                                <div class="custom-control custom-switch" style="margin: 8px; display: inline-flex !important;">
                                    <input class="custom-control-input chkFieldSettings" type="checkbox" id="formCheck-custom-{{getIndex index}}"
                                    value="{{#if equals index 0}}one{{else if equals index 1}}two{{else}}three{{/if}}" checked="{{this.active}}" data-id="{{this.id}}">
                                    <label class="custom-control-label" style="position: absolute; margin-top: 8px;"
                                    for="formCheck-custom-{{getIndex index}}"></label>
                
                                    <div class="input-group">
                                    <input id="customFieldText{{getIndex index}}" value="{{this.custfieldlabel}}"
                                        custid="{{this.id}}" type="text" class="form-control customfieldcommon customField{{getIndex index}}"
                                        placeholder="Custom Field{{getIndex index}}" style="border-color: #858796;">
                                    
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary dropdown-toggle btn-sm" type="button"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                                        <div class="dropdown-menu">
                                        <a class="dropdown-item pointer btnToggleText1 btnCustomFieldToggleText" data-id="{{getIndex index}}">Text
                                            Field</a>
                                        <a class="dropdown-item pointer btnToggleDate1 btnCustomFieldToggleDate" data-id="{{getIndex index}}">Date
                                            Field</a>
                                        <a class="dropdown-item pointer btnToggleDrop1 btnCustomFieldToggleDrop"
                                            data-id="{{getIndex index}}">Dropdown</a>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            {{/let}}
                        {{/each}}
                    </div>
                  </div>
                </div>
              </div>
      
              <div class="modal-footer">
                <button class="btn btn-success btnCustomFieldSaveSettings" type="button"><i class="fa fa-save"
                    style="margin-right: 5px;"></i>Save</button>
                <button class="btn btn-warning btnCustomFieldResetSettings" type="button"><i
                    class="fa fa-repeat" style="margin-right: 5px;"></i>Reset</button>
                <button class="btn btn-secondary" data-dismiss="modal" type="button"><i class="fa fa-remove"
                    style="margin-right: 5px;"></i>Close</button>
              </div>
            </div>
          </div>
        </div>
      
        <div class="modal fade" role="dialog" tabindex="-1" id="newCustomFieldDropdownModal">
          <div class="modal-dialog modal-sm modal-dialog-centered" role="document" style="max-width: 400px;">
            <div class="modal-content">
              <form id="newCustomFieldDropdownForm" name="newCustomFieldDropdownForm">
                <div class="modal-header">
                  <h4>
                    <div name="newCustomFieldDropdownHeader" id="newCustomFieldDropdownHeader">Add New Custom Field</div>
                  </h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                      aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body" style="padding: 8px 24px;">
                  <input type="hidden" id="customFieldDropdownId" name="customFieldDropdownId" class="form-control">
                  <input type="hidden" id="selectCustFieldNumber" name="selectCustFieldNumber">
      
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group flex-grow-1" style="margin: 8px 0px;">
                        <label>Name</label>
                        <input type="text" id="newCustomFieldDropdownName" name="newCustomFieldDropdownName"
                          class="form-control">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-success btnSaveCustomFieldDropdown" type="button"><i class="fa fa-save"
                      style="margin-right: 5px;"></i>Save</button>
                  <button class="btn btn-secondary" data-dismiss="modal" type="button"><i class="fa fa-remove"
                      style="margin-right: 5px;"></i>Close</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      
        <div class="modal fade" role="dialog" tabindex="-1" id="newCustomFieldPop">
          <div class="modal-dialog modal-md modal-dialog-centered" role="document" style="max-width: 400px;">
            <div class="modal-content">
              <form id="newstatus" name="newstatus">
                <div class="modal-header">
                  <h4>
                    <div name="newStatusHeader1" id="newStatusHeader1">Add New Dropdown</div>
                  </h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                      aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body" style="padding: 8px 24px;">
                  <!-- <input type="hidden" id="statusId1" name="statusId1" class="form-control">
                  <input type="hidden" id="clickedControl" name="clickedControl" class="form-control">
                  <input type="hidden" id="isdropDown" name="isdropDown" class="form-control"> -->
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group flex-grow-1" style="margin: 8px 0px; display:none!important">
                        <label>Custom Field Label</label>
                        <input type="text" id="newStatus1" name="newStatus1" class="form-control">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group flex-grow-1 dropDownSection" style="margin: 8px 0px;">
                        <label>Dropdown Options</label>
                        <button class="btn btn-primary btnAddNewTextBox" type="button"
                          style="padding: 3px 6px; font-size: 12px; margin-left: 8px !important; border-radius: 25px;"
                          autocomplete="off"><i class="fas fa-plus"></i></button>
                        {{#each dropdownoptions}}
                            {{#let index = @index}}
                            <div class="row textBoxSection" id="textBoxSection_{{index}}" style="padding:5px">
                                <div class="col-10">
                                    <input type="text" name="customText" row-id="{{this.id}}" class="form-control customText" value="{{this.optionname}}">
                                </div>
                                <div class="col-2">
                                    <button type="button" class="btn btn-danger btn-rounded btnRemoveDropOptions"
                                        autocomplete="off"><i class="fa fa-remove"></i></button>
                                </div>
                            </div>
                            {{/let}}
                        {{/each}}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-success btnSaveCustomField" type="button"><i class="fa fa-save"
                      style="margin-right: 5px;"></i>Save</button>
                  <button class="btn btn-secondary" data-dismiss="modal" type="button"><i class="fa fa-remove"
                      style="margin-right: 5px;"></i>Close</button>
                </div>
              </form>
            </div>
          </div>
        </div>
    </div>
  
  </template>